---
interface Props {
  title: string;
  company: string;
  description?: string;
  link?: string;
  date: string;
  // object is an optional record where each key is a list name and the value is an array of strings
  // listaTemas can be either a simple record of arrays (Record<string, string[]>)
  // or a nested record where each value is an object with an optional titulo and subtemas array
  listaTemas?: Record<string, string[] | { titulo?: string; subtemas?: string[] }>;
}

const { title, company, link, date, listaTemas } = Astro.props;
const { description } = Astro.props;

---
<div class="relative mx-12 pb-12 grid md:grid-cols-5 md:gap-10 before:absolute before:left-[-35px] before:block before:h-full before:border-l-2 before:border-black/20 dark:before:border-white/15 before:content-['']">
  <div class="pb-12 md:col-span-2">
    <div class="sticky top-0">
      <span
        class="absolute -left-[42px] text-5xl text-mint-400 rounded-full drop-shadow-[0px_0px_8px_rgba(0,255,94,1)]"
        >&bull;</span
      >
      <h3
        
        class="text-xl font-bold text-mint-400"
      >
        {title}
      </h3>
      <h4 class="text-xl font-semibold text-zinc-600 dark:text-white">
        {company}
      </h4>
      <time datetime={date} class="text-sm text-zinc-600/80 dark:text-white/80">
        {date}
      </time>
    </div>
  </div>
  <div
    class="flex flex-col gap-2 pb-4 text-zinc-00 dark:text-zinc-300 md:col-span-3"
  >
    {listaTemas && (
      <div class="mt-3 space-y-4">
        {Object.entries(listaTemas).map(([sesion, value]) => {
          const isArray = Array.isArray(value);
          return (
            <section>
              {isArray ? (
                <ul class="list-disc list-inside pl-2 text-sm text-zinc-700 dark:text-zinc-300">
                  {value.map(item => (
                    <li>{item}</li>
                  ))}
                </ul>
              ) : (
                <div class="space-y-2">
                  {value.titulo && (
                    <h5 class="text-xl font-bold text-zinc-500 dark:text-white">{value.titulo}</h5>
                  )}
                  {value.subtemas && (
                    <ul class="list-disc list-inside pl-2 text-sm text-zinc-700 dark:text-zinc-300">
                      {value.subtemas.map(item => (
                        <li>{item}</li>
                      ))}
                    </ul>
                  )}
                </div>
              )}
            </section>
          );
        })}
      </div>
    )}
  </div>
</div>
